<!DOCTYPE html>
<html lang="zh_CN">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<meta name="theme-color" content="#494f5c">
	<meta name="msapplication-TileColor" content="#494f5c">
<meta itemprop="name" content="实现客户端同步和异步调用RPC微服务(微服务系列第三天)">
<meta itemprop="description" content="前言  学习java的第3天 实现目标： 学习tars 客户端同步和异步调用RPC服务
 前面搞了那么多环境，主要还是为了折腾多语言微服务开发架构，这样就不用只限定某一种开发语言了，各种语言谁行谁上。今天主要目的就是把前面做的服务端程序，使用客户端来调用。
客户端同步/单向/异步调用服务 构建客户端工程项目,提供WEB代理服务 创建方法有很多种，具体不多说了，自行创建maven项目
添加依赖 &lt;dependency&gt; &lt;groupId&gt;com.tencent.tars&lt;/groupId&gt; &lt;artifactId&gt;tars-client&lt;/artifactId&gt; &lt;version&gt;1.7.2&lt;/version&gt; &lt;type&gt;jar&lt;/type&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.tencent.tars&lt;/groupId&gt; &lt;artifactId&gt;tars-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1.7.2&lt;/version&gt; &lt;/dependency&gt; 添加插件 &lt;build&gt; &lt;finalName&gt;mqwebservice&lt;/finalName&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;!--tars2java plugin --&gt; &lt;plugin&gt; &lt;groupId&gt;com.tencent.tars&lt;/groupId&gt; &lt;artifactId&gt;tars-maven-plugin&lt;/artifactId&gt; &lt;version&gt;1.7.2&lt;/version&gt; &lt;configuration&gt; &lt;tars2JavaConfig&gt; &lt;!-- tars文件位置 --&gt; &lt;tarsFiles&gt; &lt;tarsFile&gt;${basedir}/src/main/resources/mqserver.tars&lt;/tarsFile&gt; &lt;/tarsFiles&gt; &lt;!-- 源文件编码 --&gt; &lt;tarsFileCharset&gt;UTF-8&lt;/tarsFileCharset&gt; &lt;!-- 生成代码，PS：客户端调用，这里需要设置为false --&gt; &lt;servant&gt;false&lt;/servant&gt; &lt;!-- 生成源代码编码 --&gt; &lt;charset&gt;UTF-8&lt;/charset&gt; &lt;!-- 生成的源代码目录 --&gt; &lt;srcPath&gt;${basedir}/src/main/java&lt;/srcPath&gt; &lt;!-- 生成源代码包前缀 --&gt; &lt;packagePrefixName&gt;com.example.mqwebservice.service.&lt;/packagePrefixName&gt; &lt;/tars2JavaConfig&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;!--package plugin--&gt; &lt;/plugins&gt; &lt;/build&gt; 注解main @SpringBootApplication @EnableTarsServer public class MqwebserviceApplication { public static void main(String[] args) { SpringApplication.">
<meta itemprop="datePublished" content="2021-01-28T18:16:06&#43;08:00" />
<meta itemprop="dateModified" content="2021-01-28T18:16:06&#43;08:00" />
<meta itemprop="wordCount" content="1040">



<meta itemprop="keywords" content="java,docker,mq,jms,tars,micro serivce,微服务," /><meta property="og:title" content="实现客户端同步和异步调用RPC微服务(微服务系列第三天)" />
<meta property="og:description" content="前言  学习java的第3天 实现目标： 学习tars 客户端同步和异步调用RPC服务
 前面搞了那么多环境，主要还是为了折腾多语言微服务开发架构，这样就不用只限定某一种开发语言了，各种语言谁行谁上。今天主要目的就是把前面做的服务端程序，使用客户端来调用。
客户端同步/单向/异步调用服务 构建客户端工程项目,提供WEB代理服务 创建方法有很多种，具体不多说了，自行创建maven项目
添加依赖 &lt;dependency&gt; &lt;groupId&gt;com.tencent.tars&lt;/groupId&gt; &lt;artifactId&gt;tars-client&lt;/artifactId&gt; &lt;version&gt;1.7.2&lt;/version&gt; &lt;type&gt;jar&lt;/type&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.tencent.tars&lt;/groupId&gt; &lt;artifactId&gt;tars-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1.7.2&lt;/version&gt; &lt;/dependency&gt; 添加插件 &lt;build&gt; &lt;finalName&gt;mqwebservice&lt;/finalName&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;!--tars2java plugin --&gt; &lt;plugin&gt; &lt;groupId&gt;com.tencent.tars&lt;/groupId&gt; &lt;artifactId&gt;tars-maven-plugin&lt;/artifactId&gt; &lt;version&gt;1.7.2&lt;/version&gt; &lt;configuration&gt; &lt;tars2JavaConfig&gt; &lt;!-- tars文件位置 --&gt; &lt;tarsFiles&gt; &lt;tarsFile&gt;${basedir}/src/main/resources/mqserver.tars&lt;/tarsFile&gt; &lt;/tarsFiles&gt; &lt;!-- 源文件编码 --&gt; &lt;tarsFileCharset&gt;UTF-8&lt;/tarsFileCharset&gt; &lt;!-- 生成代码，PS：客户端调用，这里需要设置为false --&gt; &lt;servant&gt;false&lt;/servant&gt; &lt;!-- 生成源代码编码 --&gt; &lt;charset&gt;UTF-8&lt;/charset&gt; &lt;!-- 生成的源代码目录 --&gt; &lt;srcPath&gt;${basedir}/src/main/java&lt;/srcPath&gt; &lt;!-- 生成源代码包前缀 --&gt; &lt;packagePrefixName&gt;com.example.mqwebservice.service.&lt;/packagePrefixName&gt; &lt;/tars2JavaConfig&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;!--package plugin--&gt; &lt;/plugins&gt; &lt;/build&gt; 注解main @SpringBootApplication @EnableTarsServer public class MqwebserviceApplication { public static void main(String[] args) { SpringApplication." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://aomi.run/posts/java/hello-java-3-day/" />
<meta property="article:published_time" content="2021-01-28T18:16:06+08:00" />
<meta property="article:modified_time" content="2021-01-28T18:16:06+08:00" />
<meta property="og:see_also" content="https://aomi.run/posts/java/hello-java-4-day/" /><meta property="og:see_also" content="https://aomi.run/posts/java/hello-java-2-day/" /><meta property="og:see_also" content="https://aomi.run/posts/java/hello-java-1-day/" />
<meta property="og:see_also" content="https://aomi.run/posts/java/hello-java-4-day/" /><meta property="og:see_also" content="https://aomi.run/posts/java/hello-java-2-day/" /><meta property="og:see_also" content="https://aomi.run/posts/java/hello-java-1-day/" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="实现客户端同步和异步调用RPC微服务(微服务系列第三天)"/>
<meta name="twitter:description" content="前言  学习java的第3天 实现目标： 学习tars 客户端同步和异步调用RPC服务
 前面搞了那么多环境，主要还是为了折腾多语言微服务开发架构，这样就不用只限定某一种开发语言了，各种语言谁行谁上。今天主要目的就是把前面做的服务端程序，使用客户端来调用。
客户端同步/单向/异步调用服务 构建客户端工程项目,提供WEB代理服务 创建方法有很多种，具体不多说了，自行创建maven项目
添加依赖 &lt;dependency&gt; &lt;groupId&gt;com.tencent.tars&lt;/groupId&gt; &lt;artifactId&gt;tars-client&lt;/artifactId&gt; &lt;version&gt;1.7.2&lt;/version&gt; &lt;type&gt;jar&lt;/type&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.tencent.tars&lt;/groupId&gt; &lt;artifactId&gt;tars-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1.7.2&lt;/version&gt; &lt;/dependency&gt; 添加插件 &lt;build&gt; &lt;finalName&gt;mqwebservice&lt;/finalName&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;!--tars2java plugin --&gt; &lt;plugin&gt; &lt;groupId&gt;com.tencent.tars&lt;/groupId&gt; &lt;artifactId&gt;tars-maven-plugin&lt;/artifactId&gt; &lt;version&gt;1.7.2&lt;/version&gt; &lt;configuration&gt; &lt;tars2JavaConfig&gt; &lt;!-- tars文件位置 --&gt; &lt;tarsFiles&gt; &lt;tarsFile&gt;${basedir}/src/main/resources/mqserver.tars&lt;/tarsFile&gt; &lt;/tarsFiles&gt; &lt;!-- 源文件编码 --&gt; &lt;tarsFileCharset&gt;UTF-8&lt;/tarsFileCharset&gt; &lt;!-- 生成代码，PS：客户端调用，这里需要设置为false --&gt; &lt;servant&gt;false&lt;/servant&gt; &lt;!-- 生成源代码编码 --&gt; &lt;charset&gt;UTF-8&lt;/charset&gt; &lt;!-- 生成的源代码目录 --&gt; &lt;srcPath&gt;${basedir}/src/main/java&lt;/srcPath&gt; &lt;!-- 生成源代码包前缀 --&gt; &lt;packagePrefixName&gt;com.example.mqwebservice.service.&lt;/packagePrefixName&gt; &lt;/tars2JavaConfig&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;!--package plugin--&gt; &lt;/plugins&gt; &lt;/build&gt; 注解main @SpringBootApplication @EnableTarsServer public class MqwebserviceApplication { public static void main(String[] args) { SpringApplication."/>

	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="">
	<link rel="shortcut icon" href="/favicon.ico">

	<title>实现客户端同步和异步调用RPC微服务(微服务系列第三天)</title>
	<link rel="stylesheet" href="https://aomi.run/css/style.min.eac77496566fd7d5768fd650ddb0b2b181ca6a2d7c5fdd6fe6b8ba4bf47e566f.css" integrity="sha256-6sd0llZv19V2j9ZQ3bCysYHKai18X91v5ri6S/R+Vm8=" crossorigin="anonymous">
	
</head>

<body id="page">
	
	<header id="site-header" class="animated slideInUp">
		<div class="hdr-wrapper section-inner">
			<div class="hdr-left">
				<div class="site-branding">
					<a href="https://aomi.run">Aomi</a>
				</div>
				<nav class="site-nav hide-in-mobile">
					
				<a href="https://aomi.run/about/">关于</a>
				<a href="https://aomi.run/posts/">日志</a>
				<a href="https://aomi.run/categories/">分类</a>
				<a href="https://aomi.run/series">专栏</a>
				<a href="https://aomi.run/series/hello-java">微服务</a>
				<a href="https://aomi.run/tags/">TAGS</a>

				</nav>
			</div>
			<div class="hdr-right hdr-icons">
				<button id="toc-btn" class="hdr-btn desktop-only-ib" title="目录"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3" y2="6"></line><line x1="3" y1="12" x2="3" y2="12"></line><line x1="3" y1="18" x2="3" y2="18"></line></svg></button><button id="menu-btn" class="hdr-btn" title="菜单"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button>
			</div>
		</div>
	</header>
	<div id="mobile-menu" class="animated fast">
		<ul>
			<li><a href="https://aomi.run/about/">关于</a></li>
			<li><a href="https://aomi.run/posts/">日志</a></li>
			<li><a href="https://aomi.run/categories/">分类</a></li>
			<li><a href="https://aomi.run/series">专栏</a></li>
			<li><a href="https://aomi.run/series/hello-java">微服务</a></li>
			<li><a href="https://aomi.run/tags/">TAGS</a></li>
		</ul>
	</div>


	<main class="site-main section-inner animated fadeIn faster">
		<article class="thin">
			<header class="post-header">
				<div class="post-meta"><span>2021-01-28</span></div>
				<h1>实现客户端同步和异步调用RPC微服务(微服务系列第三天)</h1>
			</header>
			<div class="content">
				<h2 id="前言">前言<a href="#前言" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<blockquote>
<p>学习java的第3天 实现目标： 学习tars 客户端同步和异步调用RPC服务</p>
</blockquote>
<p>前面搞了那么多环境，主要还是为了折腾多语言微服务开发架构，这样就不用只限定某一种开发语言了，各种语言谁行谁上。今天主要目的就是把前面做的服务端程序，使用客户端来调用。</p>
<h2 id="客户端同步单向异步调用服务">客户端同步/单向/异步调用服务<a href="#客户端同步单向异步调用服务" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<h3 id="构建客户端工程项目提供web代理服务">构建客户端工程项目,提供WEB代理服务<a href="#构建客户端工程项目提供web代理服务" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>创建方法有很多种，具体不多说了，自行创建maven项目</p>
<h3 id="添加依赖">添加依赖<a href="#添加依赖" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<div class="highlight"><pre class="chroma"><code class="language-xml" data-lang="xml">		<span class="nt">&lt;dependency&gt;</span>
			<span class="nt">&lt;groupId&gt;</span>com.tencent.tars<span class="nt">&lt;/groupId&gt;</span>
			<span class="nt">&lt;artifactId&gt;</span>tars-client<span class="nt">&lt;/artifactId&gt;</span>
			<span class="nt">&lt;version&gt;</span>1.7.2<span class="nt">&lt;/version&gt;</span>
			<span class="nt">&lt;type&gt;</span>jar<span class="nt">&lt;/type&gt;</span>
		<span class="nt">&lt;/dependency&gt;</span>
		<span class="nt">&lt;dependency&gt;</span>
			<span class="nt">&lt;groupId&gt;</span>com.tencent.tars<span class="nt">&lt;/groupId&gt;</span>
			<span class="nt">&lt;artifactId&gt;</span>tars-spring-boot-starter<span class="nt">&lt;/artifactId&gt;</span>
			<span class="nt">&lt;version&gt;</span>1.7.2<span class="nt">&lt;/version&gt;</span>
		<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div><h3 id="添加插件">添加插件<a href="#添加插件" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<div class="highlight"><pre class="chroma"><code class="language-xml" data-lang="xml">	<span class="nt">&lt;build&gt;</span>
		<span class="nt">&lt;finalName&gt;</span>mqwebservice<span class="nt">&lt;/finalName&gt;</span>
		<span class="nt">&lt;plugins&gt;</span>
			<span class="nt">&lt;plugin&gt;</span>
				<span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
				<span class="nt">&lt;artifactId&gt;</span>spring-boot-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
			<span class="nt">&lt;/plugin&gt;</span>
			<span class="c">&lt;!--tars2java plugin --&gt;</span>
			<span class="nt">&lt;plugin&gt;</span>
				<span class="nt">&lt;groupId&gt;</span>com.tencent.tars<span class="nt">&lt;/groupId&gt;</span>
				<span class="nt">&lt;artifactId&gt;</span>tars-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
				<span class="nt">&lt;version&gt;</span>1.7.2<span class="nt">&lt;/version&gt;</span>
				<span class="nt">&lt;configuration&gt;</span>
					<span class="nt">&lt;tars2JavaConfig&gt;</span>
						<span class="c">&lt;!-- tars文件位置 --&gt;</span>
						<span class="nt">&lt;tarsFiles&gt;</span>
							<span class="nt">&lt;tarsFile&gt;</span>${basedir}/src/main/resources/mqserver.tars<span class="nt">&lt;/tarsFile&gt;</span>
						<span class="nt">&lt;/tarsFiles&gt;</span>
						<span class="c">&lt;!-- 源文件编码 --&gt;</span>
						<span class="nt">&lt;tarsFileCharset&gt;</span>UTF-8<span class="nt">&lt;/tarsFileCharset&gt;</span>
						<span class="c">&lt;!-- 生成代码，PS：客户端调用，这里需要设置为false --&gt;</span>
						<span class="nt">&lt;servant&gt;</span>false<span class="nt">&lt;/servant&gt;</span>
						<span class="c">&lt;!-- 生成源代码编码 --&gt;</span>
						<span class="nt">&lt;charset&gt;</span>UTF-8<span class="nt">&lt;/charset&gt;</span>
						<span class="c">&lt;!-- 生成的源代码目录 --&gt;</span>
						<span class="nt">&lt;srcPath&gt;</span>${basedir}/src/main/java<span class="nt">&lt;/srcPath&gt;</span>
						<span class="c">&lt;!-- 生成源代码包前缀 --&gt;</span>
						<span class="nt">&lt;packagePrefixName&gt;</span>com.example.mqwebservice.service.<span class="nt">&lt;/packagePrefixName&gt;</span>
					<span class="nt">&lt;/tars2JavaConfig&gt;</span>
				<span class="nt">&lt;/configuration&gt;</span>
			<span class="nt">&lt;/plugin&gt;</span>
			<span class="c">&lt;!--package plugin--&gt;</span>
		<span class="nt">&lt;/plugins&gt;</span>
	<span class="nt">&lt;/build&gt;</span>
</code></pre></div><h3 id="注解main">注解main<a href="#注解main" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@SpringBootApplication</span>
<span class="nd">@EnableTarsServer</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MqwebserviceApplication</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">SpringApplication</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="n">MqwebserviceApplication</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div><h3 id="生成mqservertars客户端文件">生成mqserver.tars客户端文件<a href="#生成mqservertars客户端文件" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>文件用的是第一天服务端的接口定义文件 <a href="/posts/java/hello-java-1-day/">传送门</a></p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ mvn tars:tars2java
</code></pre></div><h3 id="创建web控制器">创建Web控制器<a href="#创建web控制器" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>src/main/java/com/example/mqwebservice/web/MQController.java</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@TarsHttpService</span><span class="o">(</span><span class="s">&#34;mqwebserviceObj&#34;</span><span class="o">)</span>
<span class="nd">@RestController</span><span class="o">()</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;/api/mq&#34;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MQController</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="kd">static</span> <span class="n">Logger</span> <span class="n">RPC_LOGGER</span> <span class="o">=</span> <span class="n">LoggerFactory</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="s">&#34;rpc&#34;</span><span class="o">);</span>

    <span class="nd">@TarsClient</span><span class="o">(</span><span class="s">&#34;example.mqserver.messageObj&#34;</span><span class="o">)</span>
    <span class="n">MessagePrx</span> <span class="n">messagePrx</span><span class="o">;</span>

    
    <span class="cm">/**
</span><span class="cm">     * 远程调用rpc服务，发送消息给ibmmq
</span><span class="cm">     * 
</span><span class="cm">     * @param msg
</span><span class="cm">     * @return
</span><span class="cm">     */</span>
    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">&#34;/send/{msg}&#34;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">rpcSend</span><span class="o">(</span><span class="nd">@PathVariable</span><span class="o">(</span><span class="s">&#34;msg&#34;</span><span class="o">)</span> <span class="n">String</span> <span class="n">msg</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">StringUtils</span><span class="o">.</span><span class="na">isBlank</span><span class="o">(</span><span class="n">msg</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="n">RPC_LOGGER</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">&#34;发送的报文为: {}&#34;</span><span class="o">,</span> <span class="n">msg</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">messagePrx</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="n">msg</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">&#34;/encode/{sign}&#34;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">rpcEncode</span><span class="o">(</span><span class="nd">@PathVariable</span><span class="o">(</span><span class="s">&#34;sign&#34;</span><span class="o">)</span> <span class="n">String</span> <span class="n">sign</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Holder</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">enStr</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Holder</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;();</span>
        <span class="n">messagePrx</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="n">sign</span><span class="o">,</span> <span class="n">enStr</span><span class="o">);</span>
        <span class="n">String</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">enStr</span><span class="o">.</span><span class="na">value</span><span class="o">;</span>
        <span class="n">RPC_LOGGER</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">&#34;收到的密文是: {}&#34;</span><span class="o">,</span> <span class="n">enStr</span><span class="o">.</span><span class="na">value</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">ret</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">&#34;/send/{msg}/encode/{sign}&#34;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">rpcEncodeWithSend</span><span class="o">(</span><span class="nd">@PathVariable</span><span class="o">(</span><span class="s">&#34;msg&#34;</span><span class="o">)</span> <span class="n">String</span> <span class="n">msg</span><span class="o">,</span> <span class="nd">@PathVariable</span><span class="o">(</span><span class="s">&#34;sign&#34;</span><span class="o">)</span> <span class="n">String</span> <span class="n">sign</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">StringUtils</span><span class="o">.</span><span class="na">isBlank</span><span class="o">(</span><span class="n">msg</span><span class="o">)</span> <span class="o">||</span> <span class="n">StringUtils</span><span class="o">.</span><span class="na">isBlank</span><span class="o">(</span><span class="n">sign</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="kt">boolean</span> <span class="n">ok</span> <span class="o">=</span><span class="n">messagePrx</span><span class="o">.</span><span class="na">encodeWithSend</span><span class="o">(</span><span class="n">msg</span><span class="o">,</span> <span class="n">sign</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(!</span><span class="n">ok</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="n">RPC_LOGGER</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">&#34;发送的报文为: {}&#34;</span><span class="o">,</span> <span class="n">msg</span><span class="o">);</span>
        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><h3 id="main">main<a href="#main" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@SpringBootApplication</span>
<span class="nd">@EnableTarsServer</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MqwebserviceApplication</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">SpringApplication</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="n">MqwebserviceApplication</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div><h3 id="同步调用注解">同步调用注解<a href="#同步调用注解" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>通过注解绑定了tars客户端</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java">    <span class="nd">@TarsClient</span><span class="o">(</span><span class="s">&#34;example.mqserver.messageObj&#34;</span><span class="o">)</span>
    <span class="n">MessagePrx</span> <span class="n">messagePrx</span><span class="o">;</span>
</code></pre></div><h3 id="编写restful-实现同步异步请求">编写restful 实现同步/异步请求<a href="#编写restful-实现同步异步请求" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>src/main/java/com/example/client/controller/MessageController.java</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">// 开启tars的web服务，整合spring boot tomcat 的web服务
</span><span class="c1"></span><span class="nd">@TarsHttpService</span><span class="o">(</span><span class="s">&#34;mqwebserviceObj&#34;</span><span class="o">)</span>
<span class="nd">@RestController</span><span class="o">()</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;/api/mq&#34;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MQController</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="kd">static</span> <span class="n">Logger</span> <span class="n">RPC_LOGGER</span> <span class="o">=</span> <span class="n">LoggerFactory</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="s">&#34;rpc&#34;</span><span class="o">);</span>

    <span class="nd">@TarsClient</span><span class="o">(</span><span class="s">&#34;example.mqserver.messageObj&#34;</span><span class="o">)</span>
    <span class="n">MessagePrx</span> <span class="n">messagePrx</span><span class="o">;</span>

    <span class="cm">/**
</span><span class="cm">     * 远程调用rpc服务，发送消息给ibmmq
</span><span class="cm">     * 
</span><span class="cm">     * @param msg
</span><span class="cm">     * @return
</span><span class="cm">     */</span>
    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">&#34;/send/{msg}&#34;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">rpcSend</span><span class="o">(</span><span class="nd">@PathVariable</span><span class="o">(</span><span class="s">&#34;msg&#34;</span><span class="o">)</span> <span class="n">String</span> <span class="n">msg</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">StringUtils</span><span class="o">.</span><span class="na">isBlank</span><span class="o">(</span><span class="n">msg</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="c1">// 异步调用
</span><span class="c1"></span>        <span class="n">RPC_LOGGER</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">&#34;开始异步发送的报文为: {}&#34;</span><span class="o">,</span> <span class="n">msg</span><span class="o">);</span>
        <span class="n">messagePrx</span><span class="o">.</span><span class="na">async_send</span><span class="o">(</span><span class="k">new</span> <span class="n">MessagePrxCallback</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">callback_expired</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">callback_exception</span><span class="o">(</span><span class="n">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">callback_send</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">ret</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">RPC_LOGGER</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">&#34;接收到异步返回状态: {}, &#34;</span><span class="o">,</span><span class="n">ret</span><span class="o">);</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">callback_encode</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">ret</span><span class="o">,</span> <span class="n">String</span> <span class="n">enStr</span><span class="o">){}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">callback_encodeWithSend</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">ret</span><span class="o">){}</span>
        <span class="o">},</span> <span class="n">msg</span><span class="o">);</span>
        
        <span class="c1">// 单向调用 所谓单向调用，表示客户端只管发送数据，而不接收服务端的响应，也不管服务端是否接收到请求。
</span><span class="c1"></span>        <span class="n">messagePrx</span><span class="o">.</span><span class="na">async_send</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="n">msg</span><span class="o">);</span>
        <span class="n">RPC_LOGGER</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">&#34;单向调用发送的报文为: {}&#34;</span><span class="o">,</span> <span class="n">msg</span><span class="o">);</span>


        <span class="c1">// 同步调用
</span><span class="c1"></span>        <span class="kt">boolean</span> <span class="n">isSend</span> <span class="o">=</span> <span class="n">messagePrx</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="n">msg</span><span class="o">);</span>
        <span class="n">RPC_LOGGER</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">&#34;同步发送的报文为: {}, 状态： {}&#34;</span><span class="o">,</span> <span class="n">msg</span><span class="o">,</span> <span class="n">isSend</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">isSend</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">&#34;/encode/{sign}&#34;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">rpcEncode</span><span class="o">(</span><span class="nd">@PathVariable</span><span class="o">(</span><span class="s">&#34;sign&#34;</span><span class="o">)</span> <span class="n">String</span> <span class="n">sign</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Holder</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">enStr</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Holder</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;();</span>
        <span class="n">messagePrx</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="n">sign</span><span class="o">,</span> <span class="n">enStr</span><span class="o">);</span>
        <span class="n">String</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">enStr</span><span class="o">.</span><span class="na">value</span><span class="o">;</span>
        <span class="n">RPC_LOGGER</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">&#34;收到的密文是: {}&#34;</span><span class="o">,</span> <span class="n">enStr</span><span class="o">.</span><span class="na">value</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">ret</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">&#34;/send/{msg}/encode/{sign}&#34;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">rpcEncodeWithSend</span><span class="o">(</span><span class="nd">@PathVariable</span><span class="o">(</span><span class="s">&#34;msg&#34;</span><span class="o">)</span> <span class="n">String</span> <span class="n">msg</span><span class="o">,</span> <span class="nd">@PathVariable</span><span class="o">(</span><span class="s">&#34;sign&#34;</span><span class="o">)</span> <span class="n">String</span> <span class="n">sign</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">StringUtils</span><span class="o">.</span><span class="na">isBlank</span><span class="o">(</span><span class="n">msg</span><span class="o">)</span> <span class="o">||</span> <span class="n">StringUtils</span><span class="o">.</span><span class="na">isBlank</span><span class="o">(</span><span class="n">sign</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="kt">boolean</span> <span class="n">ok</span> <span class="o">=</span> <span class="n">messagePrx</span><span class="o">.</span><span class="na">encodeWithSend</span><span class="o">(</span><span class="n">msg</span><span class="o">,</span> <span class="n">sign</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(!</span><span class="n">ok</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="n">RPC_LOGGER</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">&#34;发送的报文为: {}&#34;</span><span class="o">,</span> <span class="n">msg</span><span class="o">);</span>
        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><h3 id="tarshttpservice-用途">@TarsHttpService 用途<a href="#tarshttpservice-用途" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>把springboot tomcat的端口配置变成tars的指定的商品，可以在tars-web平台上绑定</p>
<pre><code class="language-log" data-lang="log">[SERVER] server starting at tcp -h 127.0.0.1 -p 1080 -t 3000...
[SERVER] server started at tcp -h 127.0.0.1 -p 1080 -t 3000...
[SERVER] The application started successfully.
The session manager service started...
[SERVER] server is ready...
2021-01-30 14:25:14.886 INFO 26735 --- [ main] o.s.b.w.embedded.tomcat.TomcatWebServer : Tomcat started on port(s): 1080 (http) with context path ''
</code></pre><h3 id="部署">部署<a href="#部署" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>通过之前的方法，打包-&gt;上传-&gt;测试数据-&gt;观察结果</p>
<h4 id="打包">打包<a href="#打包" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h4>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ mvn clean package -DskipTests 
</code></pre></div><h4 id="上传">上传<a href="#上传" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h4>
<p>通过tars-web上传</p>
<h4 id="测试">测试<a href="#测试" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h4>
<p>通过浏览器或curl测试</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ curl http://localhost:1080/api/mq/send/abcd
<span class="o">{</span><span class="s2">&#34;success&#34;</span>:true,<span class="s2">&#34;code&#34;</span>:200,<span class="s2">&#34;msg&#34;</span>:null,<span class="s2">&#34;data&#34;</span>:true<span class="o">}</span>% 
</code></pre></div><h4 id="查看结果">查看结果<a href="#查看结果" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h4>
<p>在tars-web后面查看日志，可以看到收到了消息，同步消息测试完成。
mqserver</p>
<pre><code class="language-log" data-lang="log">2021-01-30 14:28:30.033 INFO 26862 --- [ageObjAdapter-5] msg : send: DEV.QUEUE.1 -&gt; abcd
2021-01-30 14:28:30.034 INFO 26862 --- [ageObjAdapter-2] msg : send: DEV.QUEUE.1 -&gt; abcd
2021-01-30 14:28:30.035 INFO 26862 --- [ageObjAdapter-1] msg : send: DEV.QUEUE.1 -&gt; abcd
2021-01-30 14:28:30.037 INFO 26862 --- [enerContainer-1] flow : Consumer收到的报文为: abcd
2021-01-30 14:28:30.126 INFO 26862 --- [enerContainer-1] flow : Consumer收到的报文为: abcd
2021-01-30 14:28:30.130 INFO 26862 --- [enerContainer-1] flow : Consumer收到的报文为: abcd
</code></pre><p>mqwebservice</p>
<pre><code class="language-log" data-lang="log">2021-01-30 14:28:30.027 INFO 27613 --- [0.5-1080-exec-1] rpc : 开始异步发送的报文为: abcd
2021-01-30 14:28:30.033 INFO 27613 --- [0.5-1080-exec-1] rpc : 单向调用发送的报文为: abcd
2021-01-30 14:28:30.040 INFO 27613 --- [ient-executor-2] rpc : 接收到异步返回状态: true,
2021-01-30 14:28:30.136 INFO 27613 --- [0.5-1080-exec-1] rpc : 同步发送的报文为: abcd, 状态： true
</code></pre><p>为了展示例子，项目代码还是比较简单的。</p>
<h2 id="用golang给java服务发消息">用golang给java服务发消息<a href="#用golang给java服务发消息" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<p>后面想想加个其它语言开发的客户端来调用，体验多语言的优势，只是简要的完成，用于测试</p>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;fmt&#34;</span>
	<span class="s">&#34;log&#34;</span>

	<span class="s">&#34;github.com/TarsCloud/TarsGo/tars&#34;</span>

	<span class="s">&#34;aomi.run/goclient/mqserver&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">comm</span> <span class="o">:=</span> <span class="nx">tars</span><span class="p">.</span><span class="nf">NewCommunicator</span><span class="p">()</span>
	<span class="nx">obj</span> <span class="o">:=</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;example.mqserver.messageObj&#34;</span><span class="p">)</span>
	<span class="nx">app</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="nx">mqserver</span><span class="p">.</span><span class="nx">Message</span><span class="p">)</span>
	<span class="nx">comm</span><span class="p">.</span><span class="nf">StringToProxy</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">app</span><span class="p">)</span>

	<span class="nx">ret</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">app</span><span class="p">.</span><span class="nf">Send</span><span class="p">(</span><span class="s">&#34;通过golang发送的消息&#34;</span><span class="p">)</span>
	<span class="nf">check</span><span class="p">(</span><span class="nx">ret</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>

	<span class="nx">enStr</span> <span class="o">:=</span> <span class="s">&#34;&#34;</span>
	<span class="nx">ret</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=</span> <span class="nx">app</span><span class="p">.</span><span class="nf">Encode</span><span class="p">(</span><span class="s">&#34;通过golang发送的加密文本&#34;</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">enStr</span><span class="p">)</span>
	<span class="nf">check</span><span class="p">(</span><span class="nx">ret</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>

	<span class="nx">ret</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=</span> <span class="nx">app</span><span class="p">.</span><span class="nf">EncodeWithSend</span><span class="p">(</span><span class="s">&#34;通过golang发送的消息&#34;</span><span class="p">,</span> <span class="s">&#34;通过golang发送的加密文本&#34;</span><span class="p">)</span>
	<span class="nf">check</span><span class="p">(</span><span class="nx">ret</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>

<span class="p">}</span>

<span class="kd">func</span> <span class="nf">check</span><span class="p">(</span><span class="nx">status</span> <span class="kt">bool</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
		<span class="nx">log</span><span class="p">.</span><span class="nf">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="nx">log</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">status</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><h3 id="日志消息">日志消息<a href="#日志消息" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<pre><code class="language-log" data-lang="log">onSessionDestroyed: 0
2021-01-30 19:05:09.369 INFO 18188 --- [ageObjAdapter-3] msg : send: DEV.QUEUE.1 -&gt; 通过golang发送的消息
2021-01-30 19:05:09.381 INFO 18188 --- [enerContainer-1] flow : Consumer收到的报文为: 通过golang发送的消息
2021-01-30 19:05:09.381 INFO 18188 --- [ageObjAdapter-4] msg : encode: 通过golang发送的加密文本 -&gt; 123通过golang发送的加密文本456
2021-01-30 19:05:09.383 INFO 18188 --- [ageObjAdapter-5] msg : encode: 通过golang发送的加密文本 -&gt; 123通过golang发送的加密文本456
2021-01-30 19:05:09.383 INFO 18188 --- [ageObjAdapter-5] msg : send: DEV.QUEUE.1 -&gt; 123通过golang发送的加密文本456通过golang发送的消息
2021-01-30 19:05:09.387 INFO 18188 --- [enerContainer-1] flow : Consumer收到的报文为: 123通过golang发送的加密文本456通过golang发送的消息
</code></pre><h2 id="本地调试">本地调试<a href="#本地调试" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<p>如果所有开发的项目都要打包/上传/远程调试/查看日志，无疑是非常麻烦的，所以就需要有本地调试。查看tars官方文档中有描述说明</p>
<blockquote>
<ul>
<li>首先在工程目录下执行 mvn tars:build -Dapp=TestApp -Dserver=HelloJavaServer -DjvmParams=&rdquo;-Xms1024m -Xmx1024m -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false -Xdebug -Xrunjdwp:transport=dt_socket,address=9000,server=y,suspend=n&rdquo;</li>
<li>在工程目录target/tars/bin/tars_start 启动服务</li>
</ul>
</blockquote>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ mvn tars:build -Dapp<span class="o">=</span>example -Dserver<span class="o">=</span>mqserver -DjvmParams<span class="o">=</span><span class="s2">&#34;-Xms1024m -Xmx1024m -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false -Xdebug -Xrunjdwp:transport=dt_socket,address=9000,server=y,suspend=n&#34;</span> 
</code></pre></div><p>我调试了一段时间，会报一些错误，最后提示错误为，一直没有解决</p>
<pre><code>Failed to tars build: failed to find WEB-INF/servants.xml,  servants will be disabled
</code></pre><p>如何配置使<code>tars:build</code>找到这个目录和文件，还没学会，以后学会了再回来修改这一段。
现在我使用另外一个方法来解决这个问题,以第2天的代码为例子，来做本地调试，因为今天的例子是客户端，依赖第2天做的服务端。</p>
<h3 id="从tars服务器找文件">从tars服务器找文件<a href="#从tars服务器找文件" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ tree ~/docker-app/tars/data/node/tarsnode-data/example.mqserver

├── bin
│   ├── example.mqserver.jar
│   └── tars_start.sh
├── conf
│   ├── example.mqserver.config.conf
│   └── example.mqserver.config.conf.bak
└── data
    └── tarsnodes.dat

<span class="m">3</span> directories, <span class="m">5</span> files

$ cp ~/docker-app/tars/data/node/tarsnode-data/example.mqserver/bin/tars_start.sh .
$ cp ~/docker-app/tars/data/node/tarsnode-data/example.mqserver/conf/example.mqserver.config.conf .
</code></pre></div><h3 id="修改-examplemqserverconfigconf">修改 example.mqserver.config.conf<a href="#修改-examplemqserverconfigconf" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>day-2/tars-mq-server/src/main/resources/example.mqserver.config.conf</p>
<div class="highlight"><pre class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;tars&gt;</span>
	<span class="nt">&lt;application&gt;</span>
		enableset=N
		setdivision=NULL
		<span class="nt">&lt;client&gt;</span>
			locator=
			sync-invoke-timeout=20000
			async-invoke-timeout=20000
			refresh-endpoint-interval=60000
			stat=tars.tarsstat.StatObj
			property=tars.tarsproperty.PropertyObj
			report-interval=60000
			modulename=mqserver.messageJavaServer
		<span class="nt">&lt;/client&gt;</span>
		<span class="nt">&lt;server&gt;</span>
			node=
            		app=mqserver
            		server=Message
            		localip=127.0.0.1
            		local=tcp -h 127.0.0.1 -p 18601 -t 3000
            		basepath=.
            		datapath=.
            		logpath=.
            		loglevel=DEBUG
            		logsize=15M
            		log=
            		config=tars.tarsconfig.ConfigObj
            		notify=tars.tarsnotify.NotifyObj
            		mainclass=com.qq.tars.server.startup.Main
            		jvmparams=-Xms1024m -Xmx1024m
            		sessiontimeout=120000
            		sessioncheckinterval=60000
            		tcpnodelay=true
            		udpbuffersize=8192
            		charsetname=UTF-8
			<span class="nt">&lt;mqserver.Message.messageObjAdapter&gt;</span>
				allow
				endpoint=tcp -h 127.0.0.1 -p 18600 -t 60000
				handlegroup=mqserver.Message.messageObjAdapter
				maxconns=200000
				protocol=tars
				queuecap=10000
				queuetimeout=60000
				servant=mqserver.Message.messageObj
				shmcap=0
				shmkey=0
				threads=100
			<span class="nt">&lt;/mqserver.Message.messageObjAdapter&gt;</span>
		<span class="nt">&lt;/server&gt;</span>
	<span class="nt">&lt;/application&gt;</span>
<span class="nt">&lt;/tars&gt;</span>
</code></pre></div><h3 id="修改tars_startsh">修改tars_start.sh<a href="#修改tars_startsh" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="cp">#!/bin/sh
</span><span class="cp"></span>
java -Dconfig<span class="o">=</span>target/classes/example.mqserver.config.conf -Dcom.sun.management.jmxremote.ssl<span class="o">=</span><span class="nb">false</span> -Dcom.sun.management.jmxremote.authenticate<span class="o">=</span><span class="nb">false</span> -Xms2000m -Xmx2000m -Xmn1000m -Xss1000k -XX:CMSInitiatingOccupancyFraction<span class="o">=</span><span class="m">60</span> -XX:+CMSParallelRemarkEnabled -XX:+CMSScavengeBeforeRemark -verbosegc -XX:+PrintGCDetails -XX:ErrorFile<span class="o">=</span>target/mqserver/logs/jvm_error.log -jar target/mqserver.jar
</code></pre></div><h3 id="启动本地测试">启动本地测试<a href="#启动本地测试" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ sh tars_start.sh


  .   ____          _            __ _ _
 /<span class="se">\\</span> / ___<span class="s1">&#39;_ __ _ _(_)_ __  __ _ \ \ \ \
</span><span class="s1">( ( )\___ | &#39;</span>_ <span class="p">|</span> <span class="s1">&#39;_| | &#39;</span>_ <span class="se">\/</span> _<span class="sb">`</span> <span class="p">|</span> <span class="se">\ \ \ \
</span><span class="se"></span> <span class="se">\\</span>/  ___<span class="o">)</span><span class="p">|</span> <span class="p">|</span>_<span class="o">)</span><span class="p">|</span> <span class="p">|</span> <span class="p">|</span> <span class="p">|</span> <span class="p">|</span> <span class="o">||</span> <span class="o">(</span>_<span class="p">|</span> <span class="p">|</span>  <span class="o">)</span> <span class="o">)</span> <span class="o">)</span> <span class="o">)</span>
  <span class="err">&#39;</span>  <span class="p">|</span>____<span class="p">|</span> .__<span class="p">|</span>_<span class="p">|</span> <span class="p">|</span>_<span class="p">|</span>_<span class="p">|</span> <span class="p">|</span>_<span class="se">\_</span>_, <span class="p">|</span> / / / /
 <span class="o">=========</span><span class="p">|</span>_<span class="p">|</span><span class="o">==============</span><span class="p">|</span>___/<span class="o">=</span>/_/_/_/
 :: Spring Boot ::                <span class="o">(</span>v2.4.2<span class="o">)</span>
 ...
 ...
 ...
</code></pre></div><p>这样本地就启动起来了，调试方便多了。
既然已经折腾这么久了，后续还会很频繁的使用，弄个脚本文件来处理吧。</p>
<h3 id="makefile">Makefile<a href="#makefile" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>用Linux做开发的人肯定很熟了，我这里就简单的弄了一个脚本。
其实就是做了mvn一些命令的别名，另外加了一个上传jar文件的命令。</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ make <span class="nb">help</span>
<span class="o">===============</span>A common Makefile <span class="k">for</span> java maven tars <span class="nv">programs</span><span class="o">==============</span>
Copyright <span class="o">(</span>C<span class="o">)</span> <span class="m">2021</span> aomi.run
The following targets aresupport:

 <span class="nb">test</span>                                   - mvn <span class="nb">test</span>
 run                                    - tars <span class="nb">local</span> run
 build                                  - mvn clean package -DskipTests
 test-build                             - mvn clean package
 upload                                 - upload jar package to tars node
 build-upload                           - build and upload
 test-build-upload                      - test-build and upload
 <span class="nb">help</span>                                   - print <span class="nb">help</span> information

To make a target, <span class="k">do</span> <span class="s1">&#39;make [target]&#39;</span>
<span class="o">===============================</span> Version 1.7.2 <span class="o">=============================</span>
</code></pre></div><p><code>Makefile</code>文件存放在我的github上面，需要的可以进入<a href="https://github.com/aomirun/demo/blob/main/day-2/tars-mq-server/Makefile">传送门</a>查看。</p>
<h2 id="源代码">源代码<a href="#源代码" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<p><a href="https://github.com/aomirun/demo/tree/main/day-3/mqwebservice">实现客户端同步和异步调用RPC微服务(微服务系列第三天)</a></p>
<h2 id="结语">结语<a href="#结语" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<p>本打算今天弄简单点，不想到又加了个本地调试，和打包上传脚本，超纲了！顺便梳理了这3个文章，把项目名称和文件名称理了一下，顺便把源代码也存放到github上面，方便今后自己忘记了可以查阅。</p>

			</div>

<div class="related-posts thin">
	<h2>相关推荐</h2>
	<ul>
	
	<li><a href="/posts/java/hello-java-2-day/">实现tars-springboot-ibm-mq的微服务(微服务系列第二天)</a></li>
	
	<li><a href="/posts/java/hello-java-1-day/">通过docker-springboot-tars构建微服务环境(微服务系列第一天)</a></li>
	
	<li><a href="/posts/wsl2-vscode-openjdk-install/">Wsl2 Vscode Openjdk Install</a></li>
	
	</ul>
</div>

			<hr class="post-end">
			<footer class="post-info">
				<p>
					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="https://aomi.run/tags/java">java</a></span><span class="tag"><a href="https://aomi.run/tags/docker">docker</a></span><span class="tag"><a href="https://aomi.run/tags/mq">mq</a></span><span class="tag"><a href="https://aomi.run/tags/jms">jms</a></span><span class="tag"><a href="https://aomi.run/tags/tars">tars</a></span><span class="tag"><a href="https://aomi.run/tags/micro-serivce">micro serivce</a></span><span class="tag"><a href="https://aomi.run/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1">微服务</a></span>
				</p>
				<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>1040 字</p>
				<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>2021-01-28 18:16 &#43;0800</p>
			</footer>
		</article>
		<aside id="toc">
			<div class="toc-title">目录</div>
			<nav id="TableOfContents">
  <ul>
    <li><a href="#前言">前言</a></li>
    <li><a href="#客户端同步单向异步调用服务">客户端同步/单向/异步调用服务</a>
      <ul>
        <li><a href="#构建客户端工程项目提供web代理服务">构建客户端工程项目,提供WEB代理服务</a></li>
        <li><a href="#添加依赖">添加依赖</a></li>
        <li><a href="#添加插件">添加插件</a></li>
        <li><a href="#注解main">注解main</a></li>
        <li><a href="#生成mqservertars客户端文件">生成mqserver.tars客户端文件</a></li>
        <li><a href="#创建web控制器">创建Web控制器</a></li>
        <li><a href="#main">main</a></li>
        <li><a href="#同步调用注解">同步调用注解</a></li>
        <li><a href="#编写restful-实现同步异步请求">编写restful 实现同步/异步请求</a></li>
        <li><a href="#tarshttpservice-用途">@TarsHttpService 用途</a></li>
        <li><a href="#部署">部署</a></li>
      </ul>
    </li>
    <li><a href="#用golang给java服务发消息">用golang给java服务发消息</a>
      <ul>
        <li><a href="#日志消息">日志消息</a></li>
      </ul>
    </li>
    <li><a href="#本地调试">本地调试</a>
      <ul>
        <li><a href="#从tars服务器找文件">从tars服务器找文件</a></li>
        <li><a href="#修改-examplemqserverconfigconf">修改 example.mqserver.config.conf</a></li>
        <li><a href="#修改tars_startsh">修改tars_start.sh</a></li>
        <li><a href="#启动本地测试">启动本地测试</a></li>
        <li><a href="#makefile">Makefile</a></li>
      </ul>
    </li>
    <li><a href="#源代码">源代码</a></li>
    <li><a href="#结语">结语</a></li>
  </ul>
</nav>
		</aside>
		<div class="post-nav thin">
			<a class="next-post" href="https://aomi.run/posts/java/hello-java-4-day/">
				<span class="post-nav-label"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>&nbsp;新</span><br><span>实现java的rsa加解密与签名并调用RPC微服务(微服务系列第四天)</span>
			</a>
			<a class="prev-post" href="https://aomi.run/posts/java/hello-java-2-day/">
				<span class="post-nav-label">旧&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg></span><br><span>实现tars-springboot-ibm-mq的微服务(微服务系列第二天)</span>
			</a>
		</div>
		<div id="comments" class="thin">

<script src="https://utteranc.es/client.js"
        repo="aomirun/aomirun.github.io"
        issue-term="title"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
<style>
    .utterances {
        max-width:none
    }
</style>


</div>
	</main>

	<footer id="site-footer" class="section-inner thin animated fadeIn faster">
		<p>&copy; 2021 <a href="https://aomi.run">Aomi</a> &#183; <a href="https://aomi.run/about/" target="_blank" rel="noopener">run</a></p>
		<p> &#183; <a href="https://aomi.run/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a>
		</p>
	</footer>



	<script src="https://aomi.run/js/bundle.min.4a9a0ac3d2217822c7865b4161e6c2a71de1d70492264337755427898dd718f6.js" integrity="sha256-SpoKw9IheCLHhltBYebCpx3h1wSSJkM3dVQniY3XGPY=" crossorigin="anonymous"></script>
	

</body>

</html>
